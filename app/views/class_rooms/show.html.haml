.class_home

  .rating_container
    .up-down-widget
      - rbu = @class_room.rating_by_user(current_user.id)
      = link_to "+", {:controller => :class_rooms, :action => 'plus1', :class_room_id => @class_room.id}, :method => :post, :class => "udw-top" + (rbu==1 ? " active" : "")
      %span.udw-middle= @class_room.rating
      = link_to "-", {:controller => :class_rooms, :action => 'minus1', :class_room_id => @class_room.id}, :method => :post, :class => "udw-bottom" + (rbu==-1 ? " active" : "")
  
  %h1
    %span.learn_to Learn To
    %span.tag_line= @class_room.tag_line.upcase

  .below_tagline
    .info
      Taught by #{link_to @class_room.user.login, @class_room.user}, #{pluralize @class_room.users.length, "student"} enrolled
  
  %h2
    = @class_room.summary
  
  .announcements_box
    %h4
      = "Announcements"
      = link_to "see all", :controller => :announcements, :action => :show, :class_room_id => @class_room.id
      - if @is_creator
        %a{:href=>"#", :id => "post_new"} post new
    .new_announcement_form
      -if @is_creator
        %h4 Editing New Announcement
        = render 'new_announcement'
    -if @announcement
      .announcement
        %h3= link_to @announcement.title, announcements_path(@announcement)
        %p= @announcement.content
    -elsif @is_creator
      .placeholder
        No announcements yet!  Click 'post new' above to make an announcement.
  
  - unless @class_room.resource.hidden && !@is_creator
    %div{:style => "margin: 0 30px"}
      - if @is_creator
        = link_to "Edit Description", edit_class_room_resource_page_section_resource_path(@description.section.resource_page.class_room, @description.section.resource_page, @description.section, @description)
      = render :partial => "shared/document_embed", :locals => { :res => @class_room.resource, :style => "full_page" }
