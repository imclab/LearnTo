- content_for :content do
  .class_page
    %div#left-bar
      #class-name-info{ :class => which_tab == "home" ? "home_page" : "" }
        %h1= @class_room.name
        %p.subtitle
          by
          = link_to @creator.login, user_path(@creator)
          -if (not @is_creator) and current_user 
            -if @show_join
              .enroll-button-container
                = form_for @user_permission, :url => class_rooms_add_user_path, :method => :post do |f|
                  = f.hidden_field :class_room_id, :value => @class_room.id
                  = f.submit "Join Class", :class => "button"
            -else
              %div{:style => "margin-top: 5px"}
                %span.ui-icon.ui-icon-check{:style => "float: left; margin-right: 5px; margin-top: -1px"}
                enrolled
      %nav
        - if not defined? which_tab
          - which_tab = "none"
        %ul
          %li.main
            = link_to "Class Home", class_room_path(@class_room), :class => which_tab == "home" ? "active" : ""
          - @resource_pages.each do |resource_page|
            %li.main
              - if @is_creator || resource_page.resources.length > 0
                = link_to resource_page.section, class_room_resource_page_path(@class_room, resource_page), :class => which_tab == resource_page.section ? "active" : ""
          %li.main
            = link_to "Discussion", @class_room.forum, :class => which_tab == "discussion" ? "active" : ""
          %li.main
            = link_to "Students", students_show_path(:class_room => @class_room.id), :class => which_tab == "students" ? "active" : ""
        %br
        %br
        -if @is_creator
          = link_to "Delete class", class_room_path(@class_room), confirm: 'Are you sure you want to destroy this class and all of its contents?', method: :delete
        -if current_user and not @show_join and not @is_creator

          .enroll-button-container
            = link_to "Leave Class", @user_permission, confirm: 'Are you sure you want to leave this class?', method: :delete 

    %div#center-page
      = content_for?(:class_room_content) ? yield(:class_room_content) : yield
  .clear

= render :template => "layouts/application"
